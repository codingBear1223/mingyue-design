"use strict";(self.webpackChunkmingyue_design=self.webpackChunkmingyue_design||[]).push([[727],{"./src/components/Upload/upload.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BasicUpload:()=>BasicUpload,DragUpload:()=>DragUpload,__namedExportsOrder:()=>__namedExportsOrder,default:()=>upload_stories});var react=__webpack_require__("./node_modules/react/index.js"),Button_button=__webpack_require__("./src/components/Button/button.tsx"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),icon=__webpack_require__("./src/components/Icon/icon.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Progress=props=>{const{percent,strokeHeight,showText,styles,theme}=props;return(0,jsx_runtime.jsx)("div",{className:"progress-bar",style:styles,children:(0,jsx_runtime.jsx)("div",{className:`progress-bar-outer progress-bar-outer-${theme}`,style:{height:`${strokeHeight}px`},children:(0,jsx_runtime.jsx)("div",{className:`progress-bar-inner progress-bar-inner-${theme}`,style:{width:`${percent}%`},children:showText&&(0,jsx_runtime.jsx)("span",{className:"inner-text",children:`${percent}%`})})})})};Progress.defaultProps={strokeHeight:15,showText:!0,theme:"primary"};const progress=Progress;Progress.__docgenInfo={description:"",methods:[],displayName:"Progress",props:{percent:{required:!0,tsType:{name:"number"},description:""},strokeHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"15",computed:!1}},showText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},styles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},theme:{required:!1,tsType:{name:"union",raw:'| "primary"\n| "secondary"\n| "success"\n| "info"\n| "warning"\n| "danger"\n| "light"\n| "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:"",defaultValue:{value:'"primary"',computed:!1}}}};const UploadList=props=>{const{fileList,onRemove}=props;return(0,jsx_runtime.jsx)("ul",{className:"upload-list",children:fileList.map((item=>(0,jsx_runtime.jsxs)("li",{className:"upload-list-item",onClick:()=>onRemove(item),children:[(0,jsx_runtime.jsxs)("div",{className:"file-info",children:[(0,jsx_runtime.jsxs)("span",{className:`file-name file-name-${item.status}`,children:[(0,jsx_runtime.jsx)(icon.A,{icon:"file-alt",theme:"secondary"}),item.name]}),(0,jsx_runtime.jsxs)("span",{className:"file-status",children:["success"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"check-circle",theme:"success"}),"error"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"times-circle",theme:"danger"}),"uploading"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0,theme:"primary"})]}),(0,jsx_runtime.jsx)("span",{className:"file-actions",children:(0,jsx_runtime.jsx)(icon.A,{icon:"times",onClick:()=>onRemove(item)})})]}),"uploading"===item.status&&(0,jsx_runtime.jsx)(progress,{percent:item.percent||0,theme:"primary"})]},item.uid)))})},uploadList=UploadList;UploadList.__docgenInfo={description:"",methods:[],displayName:"UploadList",props:{fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""}}};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);const Dragger=props=>{const{onFile,children}=props,[dragOver,setDragOver]=(0,react.useState)(!1),classes=classnames_default()("mingyue-drag",{"is-dragover":dragOver}),handleDrag=(e,over)=>{console.log("drag over",over),e.preventDefault(),setDragOver(over)};return(0,jsx_runtime.jsx)("div",{className:classes,onDragOver:e=>handleDrag(e,!0),onDragLeave:e=>handleDrag(e,!1),onDrop:e=>(e=>{e.preventDefault(),setDragOver(!1),onFile(e.dataTransfer.files)})(e),children})},dragger=Dragger;Dragger.__docgenInfo={description:"",methods:[],displayName:"Dragger",props:{onFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: FileList) => void",signature:{arguments:[{type:{name:"FileList"},name:"file"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Upload=props=>{const inputRef=(0,react.useRef)(null),{action,onProgress,onSuccess,onError,beforeUpload,onChange,onRemove,defaultFileList,name,data,headers,withCredentials,accept,multiple,drag,children}=props,[fileList,setFileList]=(0,react.useState)(defaultFileList||[]),handleClick=()=>{var _inputRef$current;null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.click()},handleChange=e=>{var _e$target;const files=null===(_e$target=e.target)||void 0===_e$target?void 0:_e$target.files;files&&uploadFiles(files)},uploadFiles=files=>{Array.from(files).forEach((file=>{if(beforeUpload){const result=beforeUpload(file);result&&result instanceof Promise?result.then((processedFile=>{post(processedFile)})):!0===result?post(file):null==onChange||onChange(file)}else post(file)}))},post=file=>{const _file={name:file.name,size:file.size,uid:Date.now()+"upload-file",status:"ready",raw:file,percent:0};setFileList((prevList=>[...prevList,_file]));const formData=new FormData;formData.append(name||"file",file),data&&Object.keys(data).forEach((key=>{formData.append(key,data[key])})),axios.A.post(action,formData,{headers:{"Content-Type":"multipart/form-data",...headers},withCredentials,onUploadProgress:e=>{if(setFileList((prevList=>prevList.map((item=>(item.uid===_file.uid&&(item.status="uploading",item.percent=Math.round(100*e.loaded/(e.total||0))),item))))),onProgress&&e.total){const percentage=Math.round(100*e.loaded/(e.total||0));percentage<100&&(null==onProgress||onProgress(percentage,file))}}}).then((res=>{setFileList((prevList=>prevList.map((item=>(item.uid===_file.uid&&(item.status="success",item.response=res),item))))),null==onSuccess||onSuccess(res,file),null==onChange||onChange(file)})).catch((err=>{setFileList((prevList=>prevList.map((item=>(item.uid===_file.uid&&(item.status="error",item.error=err),item))))),null==onError||onError(err,file),null==onChange||onChange(file)}))};return console.log("fileList",fileList),(0,jsx_runtime.jsxs)("div",{className:"mingyue-upload",children:[!drag&&(0,jsx_runtime.jsx)(Button_button.A,{btnType:"primary",onClick:handleClick,children:"上传文件"}),drag?(0,jsx_runtime.jsxs)("div",{className:"mingyue-upload-input-wrapper",onClick:handleClick,style:{display:"inline-block"},children:[(0,jsx_runtime.jsx)(dragger,{onFile:uploadFiles,children}),(0,jsx_runtime.jsx)("input",{type:"file",className:"mingyue-upload-input",style:{display:"none"},ref:inputRef,onChange:handleChange,accept,multiple})]}):(0,jsx_runtime.jsx)("input",{type:"file",className:"mingyue-upload-input",style:{display:"none"},ref:inputRef,onChange:handleChange,accept,multiple}),(0,jsx_runtime.jsx)(uploadList,{fileList:defaultFileList||[],onRemove:onRemove||(()=>{})})]})};Upload.defaultProps={name:"file"};const upload=Upload;Upload.__docgenInfo={description:"",methods:[],displayName:"Upload",props:{action:{required:!0,tsType:{name:"string"},description:""},onProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(percentage: number, file: File) => void",signature:{arguments:[{type:{name:"number"},name:"percentage"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(res: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"res"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(err: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"err"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},beforeUpload:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => boolean | Promise<File>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"union",raw:"boolean | Promise<File>",elements:[{name:"boolean"},{name:"Promise",elements:[{name:"File"}],raw:"Promise<File>"}]}}},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},defaultFileList:{required:!1,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:""},headers:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:""},name:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"file"',computed:!1}},data:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:""},withCredentials:{required:!1,tsType:{name:"boolean"},description:""},accept:{required:!1,tsType:{name:"string"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},drag:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const upload_stories={title:"Example/Upload",parameters:{layout:"centered"},tags:["autodocs"],argTypes:{onSuccess:{control:{type:"object"},action:"onSuccess"},onProgress:{control:{type:"object"},action:"onProgress"},action:{control:"text"},onError:{control:{type:"object"},action:"onError"}},args:{action:"https://jsonplaceholder.typicode.com/posts/",onSuccess:(res,file)=>{console.log("onSuccess",res,file),alert("上传成功")},onProgress:(percentage,file)=>{console.log(percentage,file)},onError:(err,file)=>{console.log(err,file),alert("上传失败")}}},BasicUpload={args:{},render:args=>{const defaultFileList=[{uid:"1",name:"success.png",size:1e3,status:"success",raw:new File([],"success.png",{type:"image/png"})},{uid:"2",name:"error.png",size:1e3,status:"error",raw:new File([],"error.png",{type:"image/png"})},{uid:"3",name:"ready.png",size:1e3,status:"ready",raw:new File([],"ready.png",{type:"image/png"})},{uid:"4",name:"uploading.png",size:1e3,status:"uploading",raw:new File([],"uploading.png",{type:"image/png"}),percent:50}];return(0,jsx_runtime.jsx)(upload,{action:"https://jsonplaceholder.typicode.com/posts",onSuccess:(res,file)=>{console.log(res,file),alert("上传成功")},onProgress:(percentage,file)=>{console.log(percentage,file)},onError:(err,file)=>{console.log(err,file),alert("上传失败")},beforeUpload:file=>new Promise(((resolve,reject)=>{Math.round(file.size/1024)>50&&(alert("文件大小不能超过50kb"),reject(file));resolve(new File([file],"success.png",{type:file.type}))})),onChange:file=>{console.log("onChange",file)},name:"mingyuetest.png",data:{token:"1234567890"},withCredentials:!0,defaultFileList})}},DragUpload={args:{},render:args=>(0,jsx_runtime.jsx)(upload,{action:"https://jsonplaceholder.typicode.com/posts",onSuccess:(res,file)=>{console.log(res,file),alert("上传成功")},onProgress:(percentage,file)=>{console.log(percentage,file)},onError:(err,file)=>{console.log(err,file),alert("上传失败")},beforeUpload:file=>new Promise(((resolve,reject)=>{Math.round(file.size/1024)>50&&(alert("文件大小不能超过50kb"),reject(file));resolve(new File([file],"success.png",{type:file.type}))})),onChange:file=>{console.log("onChange",file)},name:"mingyuetest.png",data:{token:"1234567890"},withCredentials:!0,drag:!0,children:(0,jsx_runtime.jsxs)("div",{style:{padding:"20px 0",border:"1px dashed #ccc",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload",size:"5x",theme:"secondary"}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("p",{children:"将文件拖到此处"})]})})},__namedExportsOrder=["BasicUpload","DragUpload"];BasicUpload.parameters={...BasicUpload.parameters,docs:{...BasicUpload.parameters?.docs,source:{originalSource:'{\n  args: {},\n  render: args => {\n    const onSuccess = (res: any, file: File) => {\n      console.log(res, file);\n      alert("上传成功");\n    };\n    const onProgress = (percentage: number, file: File) => {\n      console.log(percentage, file);\n    };\n    const onError = (err: any, file: File) => {\n      console.log(err, file);\n      alert("上传失败");\n    };\n    const beforeUpload = (file: File) => {\n      if (Math.round(file.size / 1024) > 50) {\n        alert("文件大小不能超过50kb");\n        return false;\n      }\n      return true;\n    };\n    const defaultFileList: UploadFile[] = [{\n      uid: "1",\n      name: "success.png",\n      size: 1000,\n      status: "success",\n      raw: new File([], "success.png", {\n        type: "image/png"\n      })\n    }, {\n      uid: "2",\n      name: "error.png",\n      size: 1000,\n      status: "error",\n      raw: new File([], "error.png", {\n        type: "image/png"\n      })\n    }, {\n      uid: "3",\n      name: "ready.png",\n      size: 1000,\n      status: "ready",\n      raw: new File([], "ready.png", {\n        type: "image/png"\n      })\n    }, {\n      uid: "4",\n      name: "uploading.png",\n      size: 1000,\n      status: "uploading",\n      raw: new File([], "uploading.png", {\n        type: "image/png"\n      }),\n      percent: 50\n    }];\n    const beforeUploadPromise = (file: File) => {\n      return new Promise<File>((resolve, reject) => {\n        if (Math.round(file.size / 1024) > 50) {\n          alert("文件大小不能超过50kb");\n          reject(file);\n        }\n        const newFile = new File([file], "success.png", {\n          type: file.type\n        });\n        resolve(newFile);\n      });\n    };\n    const onChange = (file: File) => {\n      console.log("onChange", file);\n    };\n    return <Upload action="https://jsonplaceholder.typicode.com/posts" onSuccess={onSuccess} onProgress={onProgress} onError={onError} beforeUpload={beforeUploadPromise} onChange={onChange} name="mingyuetest.png" data={{\n      token: "1234567890"\n    }} withCredentials={true} defaultFileList={defaultFileList} />;\n  }\n}',...BasicUpload.parameters?.docs?.source}}},DragUpload.parameters={...DragUpload.parameters,docs:{...DragUpload.parameters?.docs,source:{originalSource:'{\n  args: {},\n  render: args => {\n    const onSuccess = (res: any, file: File) => {\n      console.log(res, file);\n      alert("上传成功");\n    };\n    const onProgress = (percentage: number, file: File) => {\n      console.log(percentage, file);\n    };\n    const onError = (err: any, file: File) => {\n      console.log(err, file);\n      alert("上传失败");\n    };\n    const beforeUpload = (file: File) => {\n      if (Math.round(file.size / 1024) > 50) {\n        alert("文件大小不能超过50kb");\n        return false;\n      }\n      return true;\n    };\n    const beforeUploadPromise = (file: File) => {\n      return new Promise<File>((resolve, reject) => {\n        if (Math.round(file.size / 1024) > 50) {\n          alert("文件大小不能超过50kb");\n          reject(file);\n        }\n        const newFile = new File([file], "success.png", {\n          type: file.type\n        });\n        resolve(newFile);\n      });\n    };\n    const onChange = (file: File) => {\n      console.log("onChange", file);\n    };\n    return <Upload action="https://jsonplaceholder.typicode.com/posts" onSuccess={onSuccess} onProgress={onProgress} onError={onError} beforeUpload={beforeUploadPromise} onChange={onChange} name="mingyuetest.png" data={{\n      token: "1234567890"\n    }} withCredentials={true} drag>\n        <div style={{\n        padding: "20px 0",\n        border: "1px dashed #ccc",\n        display: "flex",\n        flexDirection: "column",\n        alignItems: "center"\n      }}>\n          <Icon icon="upload" size="5x" theme="secondary" />\n          <br />\n          <p>将文件拖到此处</p>\n        </div>\n      </Upload>;\n  }\n}',...DragUpload.parameters?.docs?.source}}}},"./src/components/Button/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Button=props=>{const{btnType="default",className,disabled=!1,size,children,href,...rest}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("btn",className,{[`btn-${btnType}`]:btnType,[`btn-${size}`]:size,disabled:"link"===btnType&&disabled});return"link"===btnType?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("a",{className:classes,href,...rest,children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:classes,disabled,...rest,children})},__WEBPACK_DEFAULT_EXPORT__=Button;Button.__docgenInfo={description:"",methods:[],displayName:"Button"}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fortawesome/fontawesome-svg-core/index.mjs"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_2__.Yv.add(_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__.X7I);const Icon=props=>{const{className,theme,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("mingyue-icon",className,{[`icon-${theme}`]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.g,{className:classes,...restProps})},__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:'| "primary"\n| "secondary"\n| "success"\n| "info"\n| "warning"\n| "danger"\n| "light"\n| "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:""}},composes:["FontAwesomeIconProps"]}}}]);