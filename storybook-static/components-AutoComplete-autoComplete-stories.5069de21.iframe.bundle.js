"use strict";(self.webpackChunkmingyue_design=self.webpackChunkmingyue_design||[]).push([[397],{"./src/components/AutoComplete/autoComplete.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>autoComplete_stories});var input=__webpack_require__("./src/components/Input/input.tsx"),react=__webpack_require__("./node_modules/react/index.js"),icon=__webpack_require__("./src/components/Icon/icon.tsx");const hooks_useDebounce=(value,delay)=>{const[dbValue,setDbValue]=(0,react.useState)(value);return(0,react.useEffect)((()=>{const timer=setTimeout((()=>{setDbValue(value)}),delay);return()=>{clearTimeout(timer)}}),[value,delay]),dbValue};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);const hooks_useClickOutside=function useClickOutside(ref,handler){(0,react.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};return document.addEventListener("click",listener),()=>{document.removeEventListener("click",listener)}}),[ref,handler])};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const AutoComplete=props=>{const{value,data,fetchSuggestions,onSelect,renderOption,...restProps}=props,[inputValue,setInputValue]=(0,react.useState)(value),[suggestions,setSuggestions]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!1),[highlightIndex,setHighlightIndex]=(0,react.useState)(-1),debouncedValue=hooks_useDebounce(inputValue,300),triggerRef=(0,react.useRef)(!1),componentRef=(0,react.useRef)(null);hooks_useClickOutside(componentRef,(()=>{setSuggestions([])})),(0,react.useEffect)((()=>{if(debouncedValue&&triggerRef.current){const results=fetchSuggestions(debouncedValue);results instanceof Promise?(setLoading(!0),results.then((data=>{setSuggestions(data),setLoading(!1)}))):setSuggestions(results)}else setSuggestions([])}),[debouncedValue]);const handleChangeValue=item=>{setInputValue(item.value),setSuggestions([]),onSelect&&onSelect(item),triggerRef.current=!1},highlight=index=>{console.log("index",index),index<0&&(index=0),index>suggestions.length-1&&(index=suggestions.length-1),setHighlightIndex(index)};return(0,jsx_runtime.jsxs)("div",{className:"mingyue-auto-complete",ref:componentRef,children:[(0,jsx_runtime.jsx)(input.A,{onChange:e=>{const value=e.target.value.trim();triggerRef.current=!0,setInputValue(value)},onKeyDown:e=>{switch(console.log("e.key",e.key),e.key){case"Enter":suggestions[highlightIndex]&&(setHighlightIndex(-1),handleChangeValue(suggestions[highlightIndex]));break;case"ArrowUp":highlight(highlightIndex-1);break;case"ArrowDown":highlight(highlightIndex+1);break;case"Escape":setSuggestions([]),setHighlightIndex(-1)}},value:inputValue,...restProps}),loading&&(0,jsx_runtime.jsx)("ul",{children:(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0})}),!loading&&suggestions.length>0&&(0,jsx_runtime.jsx)("ul",{className:"mingyue-suggestion-list",children:suggestions.map(((item,index)=>{const dropDownClass=classnames_default()("mingyue-suggestion-item",{"mingyue-suggestion-item-is-active":highlightIndex===index});return(0,jsx_runtime.jsx)("li",{className:dropDownClass,onClick:()=>{handleChangeValue(item)},children:renderOption?renderOption(item):item.value},index)}))})]})},autoComplete=AutoComplete;AutoComplete.__docgenInfo={description:"",methods:[],displayName:"AutoComplete",props:{value:{required:!0,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:"T & DataSourceType",elements:[{name:"T"},{name:"DataSourceType"}]}],raw:"Suggest[]"},description:""},fetchSuggestions:{required:!0,tsType:{name:"signature",type:"function",raw:"(str: string) => Suggest<any>[] | Promise<Suggest<any>[]>",signature:{arguments:[{type:{name:"string"},name:"str"}],return:{name:"union",raw:"Suggest<any>[] | Promise<Suggest<any>[]>",elements:[{name:"Array",elements:[{name:"intersection",raw:"T & DataSourceType",elements:[{name:"any"},{name:"DataSourceType"}]}],raw:"Suggest<any>[]"},{name:"Promise",elements:[{name:"Array",elements:[{name:"intersection",raw:"T & DataSourceType",elements:[{name:"any"},{name:"DataSourceType"}]}],raw:"Suggest<any>[]"}],raw:"Promise<Suggest<any>[]>"}]}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: Suggest<any>) => void",signature:{arguments:[{type:{name:"intersection",raw:"T & DataSourceType",elements:[{name:"any"},{name:"DataSourceType"}]},name:"item"}],return:{name:"void"}}},description:""},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: Suggest<any>) => React.ReactNode",signature:{arguments:[{type:{name:"intersection",raw:"T & DataSourceType",elements:[{name:"any"},{name:"DataSourceType"}]},name:"item"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}},composes:["Omit"]};const list=[{value:"1",label:"ab"},{value:"12",label:"bcd"},{value:"123",label:"cde"}],autoComplete_stories={title:"Example/AutoComplete",component:autoComplete,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{fetchSuggestions:{control:{type:"object"},action:"fetchSuggestions"},onSelect:{control:{type:"object"},action:"onSelect"}},args:{data:list,value:"ab",fetchSuggestions:async keyword=>{const res=await fetch(`https://api.github.com/search/users?q=${keyword}`),{items=[]}=await res.json(),len=items.length>10?10:items.length;return items.length>0?items.slice(0,len).map((item=>({value:item.login,label:item.login}))):[]},onSelect:item=>{console.log(item)}}},Default={args:{value:"ab",data:list,fetchSuggestions:keyword=>fetch(`https://api.github.com/search/users?q=${keyword}`).then((res=>res.json())).then((_ref=>{let{items}=_ref;return items.slice(0,10).map((item=>({value:item.login,label:item.login})))}))},render:args=>{const[inputValue,setInputValue]=(0,react.useState)(args.value);return(0,jsx_runtime.jsx)(autoComplete,{...args,onSelect:item=>{setInputValue(null==item?void 0:item.label),console.log(item)},renderOption:item=>(0,jsx_runtime.jsx)("h3",{children:item.label})})}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    value: "ab",\n    data: list,\n    // fetchSuggestions: (keyword: string) => {\n    //   const results = list.filter((item) => item.label.indexOf(keyword) > -1);\n    //   console.log(results);\n    //   return results;\n    // },\n    fetchSuggestions: (keyword: string) => {\n      return fetch(`https://api.github.com/search/users?q=${keyword}`).then(res => res.json()).then(({\n        items\n      }) => {\n        return items.slice(0, 10).map((item: any) => ({\n          value: item.login,\n          label: item.login\n        }));\n      });\n    }\n  },\n  render: args => {\n    const [inputValue, setInputValue] = useState(args.value);\n    const renderOption = (item: any) => {\n      return <h3>{item.label}</h3>;\n    };\n    return <AutoComplete {...args} onSelect={item => {\n      setInputValue(item?.label);\n      console.log(item);\n    }} renderOption={renderOption} />;\n  }\n}',...Default.parameters?.docs?.source}}}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fortawesome/fontawesome-svg-core/index.mjs"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_2__.Yv.add(_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__.X7I);const Icon=props=>{const{className,theme,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("mingyue-icon",className,{[`icon-${theme}`]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_3__.g,{className:classes,...restProps})},__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:'| "primary"\n| "secondary"\n| "success"\n| "info"\n| "warning"\n| "danger"\n| "light"\n| "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:""}},composes:["FontAwesomeIconProps"]}},"./src/components/Input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_Icon_icon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Icon/icon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Input=props=>{const{disabled=!1,size="middle",icon,prepend,append,className,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("mingyue-input",className,{[`input-${size}`]:size,"input-disabled":disabled}),prefixClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("input-prefix",{[`input-prefix-${size}`]:size}),suffixClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("input-suffix",{[`input-suffix-${size}`]:size}),iconClasses=classnames__WEBPACK_IMPORTED_MODULE_1___default()("input-icon",{[`input-icon-${size}`]:size});return"value"in props&&(delete restProps.defaultValue,void 0!==restProps.value&&null!==restProps.value||(restProps.value="")),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"wrapper",children:[prepend&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:prefixClasses,children:prepend}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"input-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{className:classes,disabled,...restProps}),icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Icon_icon__WEBPACK_IMPORTED_MODULE_2__.A,{...icon,className:iconClasses,"data-testid":"icon"})]}),append&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:suffixClasses,children:append})]})},__WEBPACK_DEFAULT_EXPORT__=Input;Input.__docgenInfo={description:"",methods:[],displayName:"Input",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},size:{required:!1,tsType:{name:"union",raw:'"large" | "middle" | "small"',elements:[{name:"literal",value:'"large"'},{name:"literal",value:'"middle"'},{name:"literal",value:'"small"'}]},description:""},icon:{required:!1,tsType:{name:"IconProps"},description:""},prepend:{required:!1,tsType:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}]},description:""},append:{required:!1,tsType:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]}}}]);